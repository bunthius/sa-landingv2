<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Star Atlas - Explore, Conquer, and Earn in a real cash economy.</title>
    <link rel="icon" type="image/png" href="Icon.png">
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Loading Bar -->
    <div class="loading-bar" id="loadingBar"></div>
    
    <!-- Grid Background -->
    <div class="grid-container">
        <div class="grid-layer dots"></div>
        <div class="grid-layer grid"></div>
        <div class="grid-layer accent"></div>
    </div>
    
    <!-- Glow Effects -->
    <div class="glow-container">
        <div class="glow"></div>
        <div class="glow"></div>
        <div class="glow"></div>
    </div>

    <!-- Navigation -->
    <nav class="gated-content" style="display: none;">

        <div class="nav-main">
            <div class="nav-container">
                <div class="logo">
                    <img src="Logo.svg" alt="Star Atlas">
                </div>
                <ul class="nav-links">
                    <li class="has-dropdown">
                        <a href="#game">Game</a>
                        <ul class="dropdown-menu">
                            <li><a href="/">Star Atlas</a></li>
                            <li><a href="/sage-labs">SAGE Labs</a></li>
                            <li><a href="/holosim">Holosim</a></li>
                        </ul>
                    </li>
                    <li><a href="https://legacy.staratlas.com/#experience" target="_blank">Experience</a></li>
                    <li><a href="https://staratlas.com/newsroom" target="_blank">News & Info</a></li>
                    <li><a href="https://staratlas.com/contact" target="_blank">Contact</a></li>
                </ul>
                <div class="nav-cta">
                    <a href="https://play.staratlas.com/market/" target="_blank" class="download-btn">Galactic Marketplace</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <!-- Video Background -->
        <video class="video-background" autoplay muted loop playsinline>
            <source src="src/herosection_loop_7-21-hb3.mp4" type="video/mp4">
        </video>
        <div class="video-overlay"></div>
        
        <div class="hero-content center-bottom" id="heroContent">
            <img src="Logo.svg" alt="Star Atlas" class="hero-logo">
                            <div class="hero-tagline">
                    <span>EXPLORE, CONQUER, AND EARN</span>
                    <span>IN A REAL CASH ECONOMY</span>
                </div>
            <div class="hero-cta">
                <div class="terminal-box">
                    <div class="terminal-header">
                        <div class="terminal-icon-box">
                            <img src="Icon.svg" alt="Star Atlas" class="terminal-icon">
                        </div>
                        <span class="terminal-title">EARLY ACCESS</span>
                        <button class="terminal-close" onclick="bypassEmailGate(event)" aria-label="Close">
                            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M13 1L1 13M1 1L13 13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>
                    <div class="terminal-body">
                        <p class="terminal-description">Enter your Email for Star Atlas Early Access and a receive a [bribe]</p>
                        <form class="early-access-form" onsubmit="submitEarlyAccessInline(event)">
                            <div class="email-input-wrapper">
                                <input 
                                    type="email" 
                                    id="heroEmailInput" 
                                    placeholder="Email Address" 
                                    required
                                    class="hero-email-input"
                                    oninput="updateEmailDisplay(this)"
                                />
                                <div class="email-display" id="emailDisplay"></div>
                            </div>
                            <div class="button-wrapper">
                                <div class="corner-bracket top-left"></div>
                                <div class="corner-bracket top-right"></div>
                                <div class="corner-bracket bottom-left"></div>
                                <div class="corner-bracket bottom-right"></div>
                                <button type="submit" class="hero-submit-btn"><span>GET EARLY ACCESS NOW</span></button>
                            </div>
                        </form>
                    </div>
                    <div class="terminal-footer">
                        <div class="star-atlas-log" id="starAtlasLog">
                            <span class="log-date">2625.07.22</span>
                            <span class="log-time">00:00:00</span>
                        </div>
                    </div>
                    <div class="bottom-corners"></div>
                </div>
                <div id="heroMessage" class="hero-message" style="display: none;"></div>
            </div>
        </div>
    </section>





    <!-- Gated Content Container -->
    <div id="gatedContent" class="gated-sections" style="display: none;">
    
    <!-- Game Section -->
    <section class="game-section" id="game">
        <div class="section-header">
            <span class="section-number">0001.</span>
            <h2 class="section-title">GAME</h2>
            <div class="section-line"></div>
        </div>
        <p class="section-subtitle">Immerse yourself in the vastness of Galia, where Star Atlas comes alive.</p>
        
        <div class="toggle-container">
            <button class="toggle-btn active" onclick="showGameMode('3rdperson')">3rd Person Experience</button>
            <button class="toggle-btn" onclick="showGameMode('rts')">Top-Down RTS View</button>
        </div>

        <!-- 3rd Person Content -->
        <div id="3rdperson" class="game-content active">
            <p style="text-align: center; color: var(--text-secondary); max-width: 800px; margin: 0 auto 3rem;">
                Join the fight for resources and territory with intense ship-to-ship and FPS combat, exploration, 
                crafting, and quests.
            </p>
            
            <!-- Video Carousel -->
            <div class="video-carousel">
                <div class="carousel-container">
                    <div class="carousel-track" id="carousel-3rd">
                        <!-- Slide 1: Galia -->
                        <div class="carousel-slide active">
                            <video class="carousel-video" poster="src/GAME section/3rd Person Experience/Thumbnails in carousel/Slide_1_ImageThumbnail.png" controls>
                                <source src="src/GAME section/3rd Person Experience/Slide_1_Galia.mp4" type="video/mp4">
                            </video>
                            <h3 class="slide-title">Galia</h3>
                            <p class="slide-description">Explore the unexplored. Set sail across uncharted territories, establish trade routes, and build a galactic empire.</p>
                            <a href="/game" class="slide-link">Learn More ‚Üí</a>
                        </div>
                        
                        <!-- Slide 2: Game Modes -->
                        <div class="carousel-slide">
                            <video class="carousel-video" poster="src/GAME section/3rd Person Experience/Thumbnails in carousel/Slide_2_ImageThumbnail.png" controls>
                                <source src="src/GAME section/3rd Person Experience/Slide_2_GameModes.mp4" type="video/mp4">
                            </video>
                            <h3 class="slide-title">Game Modes</h3>
                            <p class="slide-description">Conquer Galia, then crush the competition. Choose your path through exploration, combat, and strategic dominance.</p>
                            <a href="/game" class="slide-link">Learn More ‚Üí</a>
                        </div>
                        
                        <!-- Slide 3: Your Fleet Your Way -->
                        <div class="carousel-slide">
                            <video class="carousel-video" poster="src/GAME section/3rd Person Experience/Thumbnails in carousel/Slide_3_ImageThumbnail.png" controls>
                                <source src="src/GAME section/3rd Person Experience/Slide_3_YourFleetYourWay.mp4" type="video/mp4">
                            </video>
                            <h3 class="slide-title">Your Fleet, Your Way</h3>
                            <p class="slide-description">View, build, and customise your fleet with complete control over every aspect of your ships.</p>
                            <a href="/game" class="slide-link">Learn More ‚Üí</a>
                        </div>
                        
                        <!-- Slide 4: Life in Galia -->
                        <div class="carousel-slide">
                            <video class="carousel-video" poster="src/GAME section/3rd Person Experience/Thumbnails in carousel/Slide_4_ImageThumbnail.png" controls>
                                <source src="src/GAME section/3rd Person Experience/Slide_4_LifeinGalia.mp4" type="video/mp4">
                            </video>
                            <h3 class="slide-title">Life in Galia</h3>
                            <p class="slide-description">From the small, furred Punaabs to luminous beings of pure light, discover the diverse inhabitants of the galaxy.</p>
                            <a href="/game" class="slide-link">Learn More ‚Üí</a>
                        </div>
                    </div>
                    
                    <!-- Carousel Navigation -->
                    <button class="carousel-btn carousel-prev" onclick="changeSlide('3rd', -1)">‚Äπ</button>
                    <button class="carousel-btn carousel-next" onclick="changeSlide('3rd', 1)">‚Ä∫</button>
                    
                    <!-- Carousel Indicators -->
                    <div class="carousel-indicators">
                        <span class="indicator active" onclick="goToSlide('3rd', 0)"></span>
                        <span class="indicator" onclick="goToSlide('3rd', 1)"></span>
                        <span class="indicator" onclick="goToSlide('3rd', 2)"></span>
                        <span class="indicator" onclick="goToSlide('3rd', 3)"></span>
                    </div>
                </div>
                
                <!-- Thumbnail Carousel -->
                <div class="thumbnail-carousel">
                    <div class="thumbnail-item active" onclick="goToSlide('3rd', 0)">
                        <img src="src/GAME section/3rd Person Experience/Thumbnails in carousel/Slide_1_ImageThumbnail.png" alt="Galia">
                    </div>
                    <div class="thumbnail-item" onclick="goToSlide('3rd', 1)">
                        <img src="src/GAME section/3rd Person Experience/Thumbnails in carousel/Slide_2_ImageThumbnail.png" alt="Game Modes">
                    </div>
                    <div class="thumbnail-item" onclick="goToSlide('3rd', 2)">
                        <img src="src/GAME section/3rd Person Experience/Thumbnails in carousel/Slide_3_ImageThumbnail.png" alt="Your Fleet, Your Way">
                    </div>
                    <div class="thumbnail-item" onclick="goToSlide('3rd', 3)">
                        <img src="src/GAME section/3rd Person Experience/Thumbnails in carousel/Slide_4_ImageThumbnail.png" alt="Life in Galia">
                    </div>
                </div>
            </div>
        </div>

        <!-- RTS Content -->
        <div id="rts" class="game-content">
            <p style="text-align: center; color: var(--text-secondary); max-width: 800px; margin: 0 auto 3rem;">
                Command vast fleets from a strategic overhead view. Manage resources, territories, and 
                shape the political landscape of the galaxy.
            </p>
            
            <!-- Video Carousel -->
            <div class="video-carousel">
                <div class="carousel-container">
                    <div class="carousel-track" id="carousel-rts">
                        <!-- Slide 1: Fleet Command -->
                        <div class="carousel-slide active">
                            <video class="carousel-video" poster="src/GAME section/Top-down RTS View/Thumbnail Images/RTS_Slide_1_ImageThumbnail.png" controls>
                                <source src="src/GAME section/Top-down RTS View/TDS_Slide_1_FleetCommand.mp4" type="video/mp4">
                            </video>
                            <h3 class="slide-title">Fleet Command</h3>
                            <p class="slide-description">Mass-manage your fleets from a strategic view, coordinating complex operations across the galaxy.</p>
                            <a href="/game" class="slide-link">Learn More ‚Üí</a>
                        </div>
                        
                        <!-- Slide 2: Holosim -->
                        <div class="carousel-slide">
                            <video class="carousel-video" poster="src/GAME section/Top-down RTS View/Thumbnail Images/Slide_1_Holosim_Thumbnail.png" controls>
                                <source src="src/GAME section/Top-down RTS View/Slide_2_Holosim.mp4" type="video/mp4">
                            </video>
                            <h3 class="slide-title">Holosim</h3>
                            <p class="slide-description">Free-to-play in-browser simulation offering strategic gameplay without barriers.</p>
                            <a href="/game" class="slide-link">Learn More ‚Üí</a>
                        </div>
                        
                        <!-- Slide 3: SAGE Labs -->
                        <div class="carousel-slide">
                            <video class="carousel-video" poster="src/GAME section/Top-down RTS View/Thumbnail Images/RTS_Slide_1_ImageThumbnail.png" controls>
                                <source src="src/GAME section/Top-down RTS View/TDS_Slide_1_FleetCommand.mp4" type="video/mp4">
                            </video>
                            <h3 class="slide-title">SAGE Labs</h3>
                            <p class="slide-description">Mine resources, craft items, scan for SDUs, and build your economic empire.</p>
                            <a href="/game" class="slide-link">Learn More ‚Üí</a>
                        </div>
                    </div>
                    
                    <!-- Carousel Navigation -->
                    <button class="carousel-btn carousel-prev" onclick="changeSlide('rts', -1)">‚Äπ</button>
                    <button class="carousel-btn carousel-next" onclick="changeSlide('rts', 1)">‚Ä∫</button>
                    
                    <!-- Carousel Indicators -->
                    <div class="carousel-indicators">
                        <span class="indicator active" onclick="goToSlide('rts', 0)"></span>
                        <span class="indicator" onclick="goToSlide('rts', 1)"></span>
                        <span class="indicator" onclick="goToSlide('rts', 2)"></span>
                    </div>
                </div>
                
                <!-- Thumbnail Carousel -->
                <div class="thumbnail-carousel">
                    <div class="thumbnail-item active" onclick="goToSlide('rts', 0)">
                        <img src="src/GAME section/Top-down RTS View/Thumbnail Images/RTS_Slide_1_ImageThumbnail.png" alt="Fleet Command">
                    </div>
                    <div class="thumbnail-item" onclick="goToSlide('rts', 1)">
                        <img src="src/GAME section/Top-down RTS View/Thumbnail Images/Slide_1_Holosim_Thumbnail.png" alt="Holosim">
                    </div>
                    <div class="thumbnail-item" onclick="goToSlide('rts', 2)">
                        <img src="src/GAME section/Top-down RTS View/Thumbnail Images/RTS_Slide_1_ImageThumbnail.png" alt="SAGE Labs">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Economy Section -->
    <section class="economy-section" id="economy">
        <div class="section-header">
            <span class="section-number">0002.</span>
            <h2 class="section-title">Economy</h2>
            <div class="section-line"></div>
        </div>
        <p class="section-subtitle">Join a real cash economy with real opportunities.</p>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value">$68.3M</div>
                <div class="stat-label">Total Volume Traded</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-value">$21.1M</div>
                <div class="stat-label">Annual GDP</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-value">9.69M</div>
                <div class="stat-label">Average ATLAS Earned Daily</div>
            </div>
        </div>
        
        <div class="economy-cta">
            <a href="https://staratlas.com/newsroom/economic-reports" target="_blank" class="secondary-btn">Latest Economic Report</a>
            <a href="https://play.staratlas.com/market/" target="_blank" class="secondary-btn">Explore Galactic Marketplace</a>
        </div>
    </section>

    <!-- Community Section -->
    <section class="community-section" id="community">
        <div class="section-header">
            <span class="section-number">0003.</span>
            <h2 class="section-title">Community</h2>
            <div class="section-line"></div>
        </div>
        <p class="community-description">
            Join a community of pioneers, ready to answer all of your questions.
        </p>
        <div class="community-links">
            <a href="#discord" class="community-btn discord-btn">
                <span>üí¨</span>
                Discord
            </a>
        </div>
        <!-- Community Image -->
        <div class="community-image-container" style="margin-top: 3rem; text-align: center;">
            <img src="src/Community_Website_july22.png" alt="Star Atlas Community" class="community-image" style="max-width: 100%; height: auto; border-radius: 10px;">
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-links">
                <div class="footer-column">
                    <h4>Game</h4>
                    <ul>
                        <li><a href="#">Download</a></li>
                        <li><a href="#">System Requirements</a></li>
                        <li><a href="#">Game Guide</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Community</h4>
                    <ul>
                        <li><a href="#">Forums</a></li>
                        <li><a href="#">Discord</a></li>
                        <li><a href="#">Reddit</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="#">Help Center</a></li>
                        <li><a href="#">Contact Us</a></li>
                        <li><a href="#">Bug Reports</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Company</h4>
                    <ul>
                        <li><a href="#">About</a></li>
                        <li><a href="#">Careers</a></li>
                        <li><a href="#">Press</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div class="social-links">
                    <a href="#">ùïè</a>
                    <a href="#">üì∫</a>
                    <a href="#">üéÆ</a>
                    <a href="#">üì∑</a>
                    <a href="#">üéµ</a>
                    <a href="#">üëæ</a>
                </div>
                <p class="footer-text">¬© 2625 Star Atlas. All rights reserved. | <a href="#">Terms of Service</a> | <a href="#">Privacy Policy</a></p>
            </div>
        </div>
    </footer>
    
    </div> <!-- End of Gated Content -->

    <!-- Scan Line Effect -->
    <div class="scan-line"></div>

    <!-- Timestamp Widget -->
<div class="timestamp gated-content" style="display: none;">
    <div class="timestamp-time" id="timestamp-time">00:00:00</div>
    <div class="timestamp-date" id="timestamp-date">Jan 01, 2625</div>
</div>

    <script>
        // Toggle game content
        function showGameMode(mode) {
            document.querySelectorAll('.toggle-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.game-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(mode).classList.add('active');
        }

        // Video Carousel Functions
        const carousels = {
            '3rd': { currentSlide: 0, totalSlides: 4 },
            'rts': { currentSlide: 0, totalSlides: 3 }
        };

        function changeSlide(carouselId, direction) {
            const carousel = carousels[carouselId];
            const track = document.getElementById(`carousel-${carouselId}`);
            const slides = track.querySelectorAll('.carousel-slide');
            const indicators = track.parentElement.querySelectorAll('.indicator');
            const thumbnails = track.parentElement.parentElement.querySelectorAll('.thumbnail-item');
            
            // Hide current slide
            slides[carousel.currentSlide].classList.remove('active');
            indicators[carousel.currentSlide].classList.remove('active');
            if (thumbnails[carousel.currentSlide]) {
                thumbnails[carousel.currentSlide].classList.remove('active');
            }
            
            // Calculate new slide index
            carousel.currentSlide += direction;
            if (carousel.currentSlide >= carousel.totalSlides) {
                carousel.currentSlide = 0;
            } else if (carousel.currentSlide < 0) {
                carousel.currentSlide = carousel.totalSlides - 1;
            }
            
            // Show new slide
            slides[carousel.currentSlide].classList.add('active');
            indicators[carousel.currentSlide].classList.add('active');
            if (thumbnails[carousel.currentSlide]) {
                thumbnails[carousel.currentSlide].classList.add('active');
            }
            
            // Pause all videos
            slides.forEach(slide => {
                const video = slide.querySelector('video');
                if (video) video.pause();
            });
        }

        function goToSlide(carouselId, slideIndex) {
            const carousel = carousels[carouselId];
            const track = document.getElementById(`carousel-${carouselId}`);
            const slides = track.querySelectorAll('.carousel-slide');
            const indicators = track.parentElement.querySelectorAll('.indicator');
            const thumbnails = track.parentElement.parentElement.querySelectorAll('.thumbnail-item');
            
            // Hide current slide
            slides[carousel.currentSlide].classList.remove('active');
            indicators[carousel.currentSlide].classList.remove('active');
            if (thumbnails[carousel.currentSlide]) {
                thumbnails[carousel.currentSlide].classList.remove('active');
            }
            
            // Show new slide
            carousel.currentSlide = slideIndex;
            slides[carousel.currentSlide].classList.add('active');
            indicators[carousel.currentSlide].classList.add('active');
            if (thumbnails[carousel.currentSlide]) {
                thumbnails[carousel.currentSlide].classList.add('active');
            }
            
            // Pause all videos
            slides.forEach(slide => {
                const video = slide.querySelector('video');
                if (video) video.pause();
            });
        }

        // Update timestamp every second with correct future date
        function updateTimestamp() {
            const now = new Date();
            const futureDate = new Date(now);
            futureDate.setFullYear(now.getFullYear() + 600);
            
            const time = futureDate.toLocaleTimeString('en-US', { hour12: false });
            const date = futureDate.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'short', 
                day: '2-digit' 
            });
            
            document.getElementById('timestamp-time').textContent = time;
            document.getElementById('timestamp-date').textContent = date;
            
            // Update Star Atlas Log timestamp
            const starAtlasLog = document.getElementById('starAtlasLog');
            if (starAtlasLog) {
                const logDate = starAtlasLog.querySelector('.log-date');
                const logTime = starAtlasLog.querySelector('.log-time');
                
                if (logDate && logTime) {
                    // Format date as YYYY.MM.DD
                    const year = futureDate.getFullYear();
                    const month = String(futureDate.getMonth() + 1).padStart(2, '0');
                    const day = String(futureDate.getDate()).padStart(2, '0');
                    logDate.textContent = `${year}.${month}.${day}`;
                    
                    // Format time as HH:MM:SS
                    const hours = String(futureDate.getHours()).padStart(2, '0');
                    const minutes = String(futureDate.getMinutes()).padStart(2, '0');
                    const seconds = String(futureDate.getSeconds()).padStart(2, '0');
                    logTime.textContent = `${hours}:${minutes}:${seconds}`;
                }
            }
        }
        setInterval(updateTimestamp, 1000);
        updateTimestamp();

        // News filter
        document.querySelectorAll('.news-nav button').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.news-nav button').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                // Animate news cards on filter change
                document.querySelectorAll('.news-card').forEach((card, index) => {
                    card.style.opacity = '0';
                    card.style.transform = 'scale(0.9)';
                    setTimeout(() => {
                        card.style.opacity = '1';
                        card.style.transform = 'scale(1)';
                    }, index * 100);
                });
            });
        });

        // Add active loading bar on page load
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.querySelector('.loading-bar').classList.add('active');
            }, 100);

            setTimeout(() => {
                document.querySelector('.loading-bar').classList.remove('active');
            }, 2600);
        });

        // Enhanced scroll animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                    
                    // Animate stat bars
                    if (entry.target.classList.contains('stat-item')) {
                        const fill = entry.target.querySelector('.stat-fill');
                        if (fill) {
                            setTimeout(() => {
                                fill.style.width = fill.dataset.value + '%';
                            }, 200);
                        }
                    }
                    
                    // Animate counter numbers
                    if (entry.target.classList.contains('stat-card')) {
                        const value = entry.target.querySelector('.stat-value');
                        if (value && !value.classList.contains('animated')) {
                            value.classList.add('animated');
                            animateValue(value);
                        }
                    }
                }
            });
        }, observerOptions);

        // Observe elements
        document.querySelectorAll('.section-header, .stat-item, .stat-card, .feature-card, .news-card, .ship-showcase').forEach(el => {
            el.classList.add('scroll-reveal');
            observer.observe(el);
        });

        // Animate counter with easing
        function animateValue(element) {
            const endValue = element.textContent;
            const duration = 2500;
            const start = 0;
            const end = parseFloat(endValue.replace(/[^0-9.]/g, ''));
            const isDecimal = endValue.includes('.');
            const prefix = endValue.match(/[^0-9.]*/)[0];
            const suffix = endValue.match(/[^0-9.]*$/)[0];
            
            let startTimestamp = null;
            
            const easeOutQuad = t => t * (2 - t);
            
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const easedProgress = easeOutQuad(progress);
                const currentValue = Math.floor(easedProgress * (end - start) + start);
                
                if (isDecimal) {
                    element.textContent = prefix + currentValue.toFixed(1) + suffix;
                } else {
                    element.textContent = prefix + currentValue.toLocaleString() + suffix;
                }
                
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                } else {
                    element.textContent = endValue;
                }
            };
            
            window.requestAnimationFrame(step);
        }

        // Enhanced parallax effect
        let mouseX = 0;
        let mouseY = 0;
        let targetX = 0;
        let targetY = 0;

        document.addEventListener('mousemove', (e) => {
            mouseX = (e.clientX / window.innerWidth - 0.5) * 2;
            mouseY = (e.clientY / window.innerHeight - 0.5) * 2;
        });

        function updateParallax() {
            targetX += (mouseX - targetX) * 0.05;
            targetY += (mouseY - targetY) * 0.05;

            // Move glow effects
            document.querySelectorAll('.glow').forEach((glow, index) => {
                const speed = (index + 1) * 15;
                glow.style.transform = `translate(${targetX * speed}px, ${targetY * speed}px)`;
            });

            // Move hero content with subtle effect - DISABLED
            // const heroContent = document.querySelector('.hero-content');
            // if (heroContent) {
            //     heroContent.style.transform = `translate(${targetX * 5}px, ${targetY * 5}px)`;
            // }

            // Move grid layers
            const gridDots = document.querySelector('.grid-layer.dots');
            if (gridDots) {
                gridDots.style.transform = `translate(${targetX * 3}px, ${targetY * 3}px)`;
            }

            requestAnimationFrame(updateParallax);
        }
        updateParallax();

        // Smooth scroll with offset for fixed nav
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    const offset = 100;
                    const targetPosition = target.offsetTop - offset;
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Enhanced scroll indicator on nav
        let lastScroll = 0;
        window.addEventListener('scroll', () => {
            const nav = document.querySelector('nav');
            const currentScroll = window.pageYOffset;
            
            if (currentScroll > 50) {
                nav.classList.add('scrolled');
            } else {
                nav.classList.remove('scrolled');
            }
            
            // Hide/show nav on scroll
            if (currentScroll > lastScroll && currentScroll > 300) {
                nav.style.transform = 'translateY(-100%)';
            } else {
                nav.style.transform = 'translateY(0)';
            }
            
            lastScroll = currentScroll;
        });



        // Add hover tilt effect to cards
        document.querySelectorAll('.feature-card, .news-card, .stat-card').forEach(card => {
            card.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                const rotateX = (y - centerY) / 10;
                const rotateY = (centerX - x) / 10;
                
                card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateZ(10px)`;
            });
            
            card.addEventListener('mouseleave', () => {
                card.style.transform = '';
            });
        });

        // Add typing effect to hero tagline - works with span structure
        const tagline = document.querySelector('.hero-tagline');
        if (tagline) {
            const spans = tagline.querySelectorAll('span');
            tagline.style.opacity = '1';
            
            // Store the original text for each span
            const originalTexts = Array.from(spans).map(span => span.textContent);
            
            // Clear all spans initially
            spans.forEach(span => span.textContent = '');
            
            // Type each span sequentially
            let currentSpan = 0;
            let currentChar = 0;
            
            const typeWriter = () => {
                if (currentSpan < spans.length) {
                    if (currentChar < originalTexts[currentSpan].length) {
                        spans[currentSpan].textContent += originalTexts[currentSpan].charAt(currentChar);
                        currentChar++;
                        setTimeout(typeWriter, 50);
                    } else {
                        // Move to next span
                        currentSpan++;
                        currentChar = 0;
                        setTimeout(typeWriter, 100); // Small pause between lines
                    }
                }
            };
            
            setTimeout(typeWriter, 1000);
        }

        // Initialize page with fade-in
        window.addEventListener('load', () => {
            document.body.style.opacity = '0';
            setTimeout(() => {
                document.body.style.transition = 'opacity 1s ease';
                document.body.style.opacity = '1';
            }, 100);
            
            // Start animations
            document.querySelectorAll('.stat-fill').forEach(fill => {
                fill.style.width = '0';
            });
        });

        // Add keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                // Close any open modals or reset UI
                document.querySelectorAll('.active').forEach(el => {
                    if (!el.classList.contains('game-content')) {
                        el.classList.remove('active');
                    }
                });
            }
        });

        // Performance optimization - throttle scroll events
        let scrollTimeout;
        window.addEventListener('scroll', () => {
            if (scrollTimeout) {
                window.cancelAnimationFrame(scrollTimeout);
            }
            scrollTimeout = window.requestAnimationFrame(() => {
                // Update UI based on scroll
            });
        });

        // Early Access Functions
        async function submitEarlyAccessInline(e) {
            e.preventDefault();
            const email = document.getElementById('heroEmailInput').value;
            const submitBtn = e.target.querySelector('.hero-submit-btn');
            const messageDiv = document.getElementById('heroMessage');
            const form = document.querySelector('.early-access-form');
            const bypassLink = document.querySelector('.bypass-link');
            
            submitBtn.disabled = true;
            submitBtn.textContent = 'Submitting...';
            messageDiv.style.display = 'none';
            
            // For local testing, always use mock response
            const isLocalhost = window.location.hostname === 'localhost' || 
                               window.location.hostname === '127.0.0.1' ||
                               window.location.hostname === '' ||
                               window.location.protocol === 'file:';
            
            if (isLocalhost || !navigator.onLine) {
                // Simulate API delay
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                // Mock successful response
                const mockKey = 'TEST-KEY-' + Math.random().toString(36).substr(2, 9).toUpperCase();
                messageDiv.innerHTML = `
                    <div class="success-inline">
                        <p>Success! Your early access key: <strong>${mockKey}</strong></p>
                        <button onclick="copyAccessKeyInline('${mockKey}')" class="copy-btn-inline">Copy Key</button>
                    </div>
                `;
                messageDiv.className = 'hero-message success';
                messageDiv.style.display = 'block';
                
                // Hide form and bypass link
                form.style.display = 'none';
                if (bypassLink) bypassLink.style.display = 'none';
                
                // Unlock content after delay
                setTimeout(() => {
                    unlockContent();
                }, 2000);
                
                submitBtn.disabled = false;
                submitBtn.textContent = 'GET EARLY ACCESS NOW';
                return; // Exit early, no need for try/catch
            }
            
            try {
                const response = await fetch('/api/early-access', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    messageDiv.innerHTML = `
                        <div class="success-inline">
                            <p>Success! Your early access key: <strong>${data.key || 'STAR-ATLAS-KEY-XXXX'}</strong></p>
                            <button onclick="copyAccessKeyInline('${data.key || 'STAR-ATLAS-KEY-XXXX'}')" class="copy-btn-inline">Copy Key</button>
                        </div>
                    `;
                    messageDiv.className = 'hero-message success';
                    
                    // Hide form and bypass link
                    form.style.display = 'none';
                    if (bypassLink) bypassLink.style.display = 'none';
                    
                    // Unlock content after successful email submission
                    setTimeout(() => {
                        unlockContent();
                    }, 2000); // Give user time to see success message
                } else {
                    messageDiv.textContent = data.message || 'An error occurred. Please try again.';
                    messageDiv.className = 'hero-message error';
                }
                messageDiv.style.display = 'block';
            } catch (error) {
                // This shouldn't happen with our local testing logic, but just in case
                console.error('Error:', error);
                messageDiv.textContent = 'An error occurred. Please try again.';
                messageDiv.className = 'hero-message error';
                messageDiv.style.display = 'block';
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'GET EARLY ACCESS NOW';
            }
        }

        function copyAccessKeyInline(key) {
            navigator.clipboard.writeText(key).then(() => {
                const copyBtn = document.querySelector('.copy-btn-inline');
                copyBtn.textContent = 'Copied!';
                setTimeout(() => copyBtn.textContent = 'Copy Key', 2000);
            });
        }
        
        // Unlock content function
        function unlockContent() {
            // Add class to body for styling
            document.body.classList.add('content-unlocked');
            
            // Show gated content
            document.getElementById('gatedContent').style.display = 'block';
            
            // Show navigation elements
            document.querySelectorAll('.gated-content').forEach(el => {
                el.style.display = '';
            });
            
            // Move hero content to bottom-left
            const heroContent = document.getElementById('heroContent');
            const heroSection = document.querySelector('.hero');
            heroContent.classList.remove('center-bottom');
            heroContent.classList.add('bottom-left');
            
            // Change hero section alignment
            heroSection.style.alignItems = 'flex-end';
            heroSection.style.justifyContent = 'flex-start';
            
            // Store unlock state
            localStorage.setItem('contentUnlocked', 'true');
        }
        
        // Bypass email gate function
        function bypassEmailGate(e) {
            e.preventDefault();
            
            // The terminal box stays visible, X button acts as bypass
            unlockContent();
        }
        
        // Check if content was previously unlocked
        // Email input display handler
        function updateEmailDisplay(input) {
            const display = document.getElementById('emailDisplay');
            const value = input.value;
            
            if (value.includes('@')) {
                const [localPart, domainPart] = value.split('@');
                display.innerHTML = `<span class="email-local">${localPart}</span><span class="email-domain">@${domainPart}</span>`;
            } else {
                display.innerHTML = `<span class="email-local">${value}</span>`;
            }
            
            // Show/hide display based on input
            display.style.opacity = value ? '1' : '0';
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            if (localStorage.getItem('contentUnlocked') === 'true') {
                unlockContent();
            }
        });

        // Legacy Modal Functions (keeping for compatibility)
        function openEarlyAccessModal() {
            document.getElementById('earlyAccessModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeEarlyAccessModal() {
            document.getElementById('earlyAccessModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        async function submitEarlyAccess(e) {
            e.preventDefault();
            const email = document.getElementById('earlyAccessEmail').value;
            const submitBtn = document.getElementById('submitEarlyAccess');
            const errorMsg = document.getElementById('errorMessage');
            const successMsg = document.getElementById('successMessage');
            const formContainer = document.getElementById('formContainer');
            
            // Clear previous messages
            errorMsg.style.display = 'none';
            submitBtn.disabled = true;
            submitBtn.textContent = 'Submitting...';
            
            try {
                const response = await fetch('/api/early-access', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    // Show success message with key
                    formContainer.style.display = 'none';
                    successMsg.style.display = 'block';
                    document.getElementById('accessKey').textContent = data.key || 'STAR-ATLAS-KEY-XXXX';
                } else {
                    errorMsg.textContent = data.message || 'An error occurred. Please try again.';
                    errorMsg.style.display = 'block';
                }
            } catch (error) {
                errorMsg.textContent = 'Connection error. Please try again.';
                errorMsg.style.display = 'block';
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Get Access';
            }
        }

        function copyAccessKey() {
            const key = document.getElementById('accessKey').textContent;
            navigator.clipboard.writeText(key).then(() => {
                const copyBtn = document.querySelector('.copy-btn');
                copyBtn.textContent = 'Copied!';
                setTimeout(() => copyBtn.textContent = 'Copy', 2000);
            });
        }

        // Close modal on outside click
        window.onclick = function(event) {
            const modal = document.getElementById('earlyAccessModal');
            if (event.target === modal) {
                closeEarlyAccessModal();
            }
        }
    </script>

    <!-- Early Access Modal -->
    <div id="earlyAccessModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEarlyAccessModal()">&times;</span>
            
            <div id="formContainer">
                <h2>Get Early Access</h2>
                <p>Enter your email to receive your early access key</p>
                
                <form onsubmit="submitEarlyAccess(event)" class="modal-form">
                    <input 
                        type="email" 
                        id="earlyAccessEmail" 
                        placeholder="Enter your email" 
                        required
                        class="modal-input"
                    />
                    
                    <p class="disclaimer">
                        By entering your email, you'll get your early-access key and occasional updates from Star Atlas. You can unsubscribe anytime.
                    </p>
                    
                    <button type="submit" id="submitEarlyAccess" class="modal-submit">Get Access</button>
                </form>
                
                <div id="errorMessage" class="error-message" style="display: none;"></div>
            </div>
            
            <div id="successMessage" class="success-container" style="display: none;">
                <h2>Success!</h2>
                <p>Your early access key:</p>
                <div class="key-display">
                    <span id="accessKey"></span>
                    <button onclick="copyAccessKey()" class="copy-btn">Copy</button>
                </div>
                <p class="success-note">Check your email for instructions on how to use your key.</p>
            </div>
        </div>
    </div>
</body>
</html> 